<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>raycoarana</title>
    <meta name="description" content="raycoarana - My coding adventures and other random stuff" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/contact.css" />

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />

    <meta property="og:site_name" content="raycoarana" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="raycoarana" />
    <meta property="og:description" content="My coding adventures and other random stuff" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="raycoarana" />
    <meta name="twitter:description" content="My coding adventures and other random stuff" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Finding The Way Home",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "My coding adventures and other random stuff"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="raycoarana" href="/feed.xml" />
</head>
<body class="paged archive-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-development " role="presentation"><a href="/tag/development">Development</a></li>
        <li class="nav-author " role="presentation"><a href="/author/raycoarana">Author</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-contact " role="presentation"><a href="/contact">Contact</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- < dynamically overriding backgrounds for tags as well as descriptions -->


<!-- < default}} -->
<!-- The tag above means - insert everything in this file into the [body] of the default.hbs template -->

<!-- If we have a tag cover, display that - else blog cover - else nothing -->
<header class="main-header tag-head " style="background-image: url(/assets/images/cover2.jpg) ">
    <nav class="main-nav overlay clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/main-logo.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href><span class="word">Menu</span></a>
        
    </nav>
    <div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">Android</h1>
            <h2 class="page-description">
            
			    A 13-post collection
            
            </h2>
        </div>
    </div>
</header>

<!-- The main content area on the homepage -->
<main id="content" class="content" role="main">

    <!-- The tag below includes the post loop - partials/loop.hbs -->
        <!-- Previous/next page links - only displayed on page 2+ -->
    <div class="extra-pagination inner">
        
            <nav class="pagination" role="pagination">
    
        
            <a class="newer-posts" href="/tag/android/page2/" title="Previous Page">&laquo; Newer Posts</a>
      
    
    <span class="page-number"> Page 3 of 3 </span>
     
</nav>
        
    </div>

    <!-- This is the post loop - each post will be output using this markup -->
    
    <article class="post">
        <header class="post-header">
            <h2 class="post-title"><a href="/blog/2014/03/ssl-pinning-ataques-man-in-the-middle/">SSL Pinning y ataques man-in-the-middle</a></h2>
        </header>
        <section class="post-excerpt">
            <p>Un problema que cada vez más está de actualidad es la seguridad y la privacidad en las aplicaciones móviles. Existe además un problema mayor que en otros entornos dado que es más plausible el conectarse a redes externas como WiFi’s públicas. Como desde nuestras apps no podemos controlar que redes utiliza el usuario, debemos securizar las conexiones con SSL. Pero…, ¿es esto suficiente? <em>Pues va a ser que no</em>.</p>

<!-- more -->

<p>[sh_margin margin=”20”]</p>

<h3 id="qué-es-ssl-pinning">¿Qué es SSL Pinning?</h3>

<p>Cuando se hace la negociación SSL y el servidor nos envía su certificado, por defecto Android (aunque ocurre igual en otras plataformas) comprueba que este pertenece a una autoridad certificadora de confianza y que este no está revocado o caducado. El problema es que cuando estamos en una red pública, es posible que un atacante se ponga “en medio” y se haga pasar por el servidor, haciendo de puente entre este y nosotros. Si esto lo hace con un certificado válido, nuestro sistema comprueba el certificado y lo dará por válido, pudiendo este atacante hacerse con todos los datos que intercambiamos con el servidor en <strong>texto claro</strong>.
SSL Pinning de denomina al proceso de verificar además que el certificado que ha enviado el servidor sea solo el de nuestro servidor y no cualquiera válido. Así, si detectamos un certificado válido pero que no es el de nuestro servidor, podemos rechazar la conexión, ya que existe alguien en medio <em>con el oído puesto</em>.</p>

<p>[sh_margin margin=”20”]</p>

<h3 id="cómo-implementamos-ssl-pinning-en-android">¿Cómo implementamos SSL Pinning en Android?</h3>

<p>Para poder implementar SSL Pinning en Android necesitamos en primer lugar preparar el certificado del servidor con el que vamos a conectarnos e incorporarlo a un almacén de certificados de Java. Para ello haremos uso de la herramienta <strong>keytool</strong> que viene con el JDK. Para hacer esto, ejecutaremos el siguiente comando:</p>

<p>[code language=”plain”]
keytool -importcert
        -trustcacerts
        -file “MICERTIFICADO.cer”
        -alias MIALIAS
        -keystore “sslpinning.ks”
        -provider org.bouncycastle.jce.provider.BouncyCastleProvider
        -providerpath “bcprov-jdk16-145.jar”
        -storetype BKS
        -storepass AQUI_VA_TU_PASSWORD
[/code]</p>

<p>Donde tendremos que especificar el nombre del certificado a importar al almacén de certificados y la contraseña con la que crearemos esta. Como podéis ver, es necesario para hacer esto un proveedor. Podemos utilizar el famoso BouncyCastle, para poder ejecutar este comando debemos tener el fichero <a href="http://www.bouncycastle.org/download/bcprov-jdk16-145.jar"><strong>bcprov-jdk16-145.jar</strong></a> en el lugar donde estamos ejecutándolo.</p>

<p>Una vez creado nuestro almacén de certificados con nombre <strong>sslpinning.ks</strong>, nos lo llevamos a nuestro proyecto. Lo copiaremos en la carpeta <strong>res/raw</strong>.</p>

<p>Ahora que tenemos todo listo, abrimos nuestro Eclipse/AndroidStudio y comenzamos a escribir código. Lo que vamos a necesitar será proporcionar al objeto HttpClient de Apache (que viene incluida en el SDK de Android) este almacén de certificados como únicos certificados válidos para realizar conexiones SSL. Para ello, vamos a sobrescribir la clase DefaultHttpClient. Crearemos un constructor que recibirá como parámetro el contexto para poder acceder al recurso donde tenemos el almacén de certificados.</p>

<p>[code language=”java”]
import android.content.Context;
import android.content.res.Resources;
import org.apache.http.impl.client.DefaultHttpClient;</p>

<p>public class SecureHttpClient extends DefaultHttpClient {</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Resources mResources;

public SecureHttpClient(Context context) {
    mResources = context.getResources();
}
</code></pre>
</div>

<p>}
[/code]</p>

<p>Una vez tenemos la clase, vamos a añadirle un método que se encargará de construir una factoría de sockets SSL, al que le proporcionaremos el almacén de certificados que debe utilizar como certificados de confianza.</p>

<p>[code language=”java”]
import org.apache.http.conn.ssl.SSLSocketFactory;
import java.io.InputStream;
import java.security.KeyStore;</p>

<p>…</p>

<p>private SSLSocketFactory buildSSLSocketFactory() {
    try {
        KeyStore trusted = KeyStore.getInstance(“BKS”);
        InputStream in = mResources.openRawResource(R.raw.sslpinning);
        try {
            trusted.load(in, “AQUI_VA_TU_PASSWORD”.toCharArray());
        } finally {
            in.close();
        }
        SSLSocketFactory sf = new SSLSocketFactory(trusted);
        sf.setHostnameVerifier(SSLSocketFactory.STRICT_HOSTNAME_VERIFIER);
        return sf;
    } catch (Exception e) {
        throw new AssertionError(e);
    }
}</p>

<p>…</p>

<p>[/code]</p>

<p>Una vez tenemos el método anterior, vamos a sobrescribir el método <em>createClientConnectionManager()</em>. En él vamos a registrar nuestra factoría de sockets SSL cuando se solicita una conexión sobre https. De esta forma, cada vez que el cliente Http va a realizar una conexión, creará el Socket SSL basado en nuestra configuración.</p>

<p>[code language=”java”]
import org.apache.http.conn.ClientConnectionManager;
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.scheme.SchemeRegistry;
import org.apache.http.conn.scheme.PlainSocketFactory;
import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;</p>

<p>…</p>

<p>@Override
protected ClientConnectionManager createClientConnectionManager() {
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme(“http”, PlainSocketFactory.getSocketFactory(), 80));
    registry.register(new Scheme(“https”, this.buildSSLSocketFactory(), 443));
    return new ThreadSafeClientConnManager(getParams(), registry);
}</p>

<p>…</p>

<p>[/code]</p>

<p>Y listo, con esto ya tenemos un cliente Http seguro que realiza una estricta comprobación de los certificados, confiando únicamente en aquellos que hemos incluido en nuestro almacén de certificados. Ya solo nos queda hacer las peticiones de la misma forma que lo hacemos normalmente.</p>

<p>[sh_margin margin=”20”]</p>

<h3 id="y-qué-pasa-con-las-aplicaciones-híbridas">¿Y qué pasa con las aplicaciones híbridas?</h3>

<p>En el caso de las aplicaciones híbridas lo anterior no vale. Las conexiones con el servidor no las hacemos nosotros sino que las hace el WebView que muestra nuestra aplicación. Luego debemos meternos en la negociación SSL que realiza el WebView para rechazar aquellas conexiones que no se hacen con el certificado de nuestro servidor. Pero esto es algo que dejaremos para un próximo artículo.</p>

 <a class="read-more" href="/blog/2014/03/ssl-pinning-ataques-man-in-the-middle/">&raquo;</a>
        </section>
        <footer class="post-meta">
            <img class="author-thumb" src="/assets/images/avatar.jpg" alt="Author image" nopin="nopin" />
            <!-- author -->
            <a href='/author/raycoarana'>Rayco Araña</a>
            <!-- [[tags prefix=" on "]] -->
             
                on 
                
                    
                       <a href='/tag/android'>Android</a>,
                       
                
                    
                       <a href='/tag/Man in the middle'>Man in the middle</a>,
                       
                
                    
                       <a href='/tag/seguridad'>Seguridad</a>,
                       
                
                    
                       <a href='/tag/SSL'>Ssl</a>,
                       
                
                    
                       <a href='/tag/SSL Pinning'>Ssl pinning</a>
                       
                
            
            <time class="post-date" datetime="2014-03-05">05 Mar 2014</time>
        </footer>
    </article>
    
    <article class="post">
        <header class="post-header">
            <h2 class="post-title"><a href="/blog/2014/03/primeros-pasos-con-google-glass/">Primeros pasos con Google Glass (I)</a></h2>
        </header>
        <section class="post-excerpt">
            <p>En esta serie de artículos, del que este es el primero, vamos a aprender a crear aplicaciones para Google Glass y esas legiones de <em>Explorers</em> que hay ahí fuera. Aunque tiene un precio aún prohibitivo y su disponibilidad es muy limitada (solo para residentes en EEUU y bajo invitación), está llamado a ser el gadget del futuro y rivalizar muy de tú a tú con otros gadgets que giran entorno a los Smartphones. Dispositivos que se conectan a nuestro Smartphone y lo complementan, permitiendo realizar ciertas acciones sin tener que sacarlo de nuestro bolsillo, como las pulseras, los relojes, etc.</p>

<!-- more -->

<p>Pero antes de empezar a hablar de cómo podemos crear Glassware (que es como se denominan estas apps), vamos a echar un vistazo a las características del hardware y del software:</p>

<p>[sh_margin margin=”20”]</p>

<h3 id="características-técnicas">Características técnicas</h3>

<ul>
  <li>
    <p>CPU OMAP 4430 SoC 1.2Ghz Dual</p>
  </li>
  <li>
    <p>1 GB RAM</p>
  </li>
  <li>
    <p>Pantalla de 640x360 pixels (hdpi)</p>
  </li>
  <li>
    <p>Sistema operativo Android 4.0.4 (API 15)</p>
  </li>
  <li>
    <p>Cámara de 5 MP con capacidad de grabación de video a 720p</p>
  </li>
  <li>
    <p>TouchPad</p>
  </li>
  <li>
    <p>GPS y SMS a tráves de conexión con smartphone</p>
  </li>
  <li>
    <p>Bluetooth</p>
  </li>
  <li>
    <p>WiFi 802.11b/g</p>
  </li>
  <li>
    <p>16 GB de almacenamiento (12 GB libres para el usuario)</p>
  </li>
  <li>
    <p>Giroscopio, acelerómetro, magnetómetro, sensor de luz ambiental y sensor de proximidad</p>
  </li>
  <li>
    <p>Micrófono y transductor de conducción ósea que actúa como altavoz</p>
  </li>
  <li>
    <p>Conector MicroUSB, tanto para conexión con el PC como para salida de auriculares</p>
  </li>
</ul>

<p>[sh_margin margin=”20”]</p>

<h3 id="cómo-se-maneja">¿Cómo se maneja?</h3>

<p>El manejo de Google Glass se realiza con una combinación entre voz, gestos con la cabeza e interacción con el TouchPad. Desde encenderlas moviendo la cabeza hacia arriba (o tocando el TouchPad) se puede interactuar con el ya famoso <strong>Ok glass…</strong> o interactuando con el TouchPad con Swipe hacia adelante/atrás, toques y Swipe abajo que hace las veces de botón atrás. Adicionalmente y a discreción de la aplicación que tengamos abierta, esta puede hacer uso de otro tipo de gestos en el TouchPad, como veremos en próximos artículos.</p>

<p>[sh_margin margin=”20”]</p>

<h3 id="google-glass-es-un-dispositivo-android-más">Google Glass es un dispositivo Android más</h3>

<p>Como hemos comentado anteriormente, las Google Glass tienen como sistema operativo un Android 4.0.4, una revisión de Android 4.0.3 en el que se mantiene su nivel de API (API 15). Por lo tanto, el modelo de programación es exactamente el mismo y la API es exactamente la misma a la de cualquier aplicación Android, salvo unas pequeñas excepciones a tener en cuenta y que iremos comentando poco a poco.</p>

<p>El entorno de desarrollo a utilizar para desarrollar Glassware será Eclipse con el plug-in ADT o Android Studio, igual que para una aplicación Android para Smartphones o Tablets. Lo que deberemos tener en cuenta a la hora de crear un proyecto para Google Glass es que la API a la que nos dirigimos es la 15.</p>

<p>[sh_margin margin=”20”]</p>

<h3 id="el-timeline-un-launcher-propio">El Timeline, un launcher propio</h3>

<p>[caption id=”attachment_173” align=”aligncenter” width=”520”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/timeline.png" alt="Representación del Timeline" /> Representación del Timeline[/caption]</p>

<p>Cuando un usuario inicia o activa su Google Glass, verá en primer lugar lo que se llama el Timeline. Este Timeline no es más que un launcher propio, desde el que se lanzan las aplicaciones y en el que se pueden visualizar notificaciones y widgets, que en el caso de Google Glass reciben el nombre de tarjetas o Cards. Estas son siempre a pantalla completa. Luego el Timeline es un conjunto de estas tarjetas, colocadas de forma longitudinal y sobre las que el usuario se puede mover usando el TouchPad. Es por ello que las tarjetas tienen acceso restringido al TouchPad, para evitar entrar en conflicto con los gestos de Swipe adelante/atrás.</p>

<p>[caption id=”attachment_179” align=”aligncenter” width=”520”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/ok-glass-e1393787954995.png" alt="Pantalla inicial de Google Glass" /> Pantalla inicial de Google Glass[/caption]</p>

<p>La tarjeta principal, aquella que muestra la hora y el texto “ok glass” es la que nos permite lanzar aplicaciones. Y aquí es donde nos encontramos una de las principales diferencias entre una aplicación Android <em>normal</em> y una aplicación para Google Glass. El inicio de una aplicación no se marca con <strong>android.intent.action.MAIN</strong>, sino que nuestra aplicación debe responder a la intención <strong>com.google.android.glass.action.VOICE_TRIGGER</strong>. Además de esta intención, debemos indicar en forma de meta-datos, una frase. Esta será la frase que el usuario diga tras decir “ok glass” y que hará que se abra nuestra aplicación. En principio esta frase es la que nosotros queramos, tenemos una guía a seguir con una serie de <a href="https://developers.google.com/glass/distribute/voice-checklist">reglas en la estructura y forma</a> de la misma. Pero si pretendemos que Google nos publique la aplicación en MyGlass, debemos ceñirnos al uso de <a href="https://developers.google.com/glass/develop/gdk/input/voice#existing_voice_commands">una lista de frases</a>. Si queremos utilizar otra frase, debemos antes enviarla para su aprobación. Si más de una aplicación está <em>suscrita</em> a una misma frase, el Timeline le dará la opción al usuario de elegir cual de ellas quiere lanzar, de forma similar a como ocurre  actualmente en las aplicaciones para Smartphones y Tablets cuando dos aplicaciones responden a una misma intención.</p>

<p>Para el manejo del Timeline y poder crear y agregar nuestras propias tarjetas, será necesario utilizar una API que está fuera del SDK normal de Android, el llamado GDK (Glass Development Kit). Esto es una librería <strong>jar</strong> con un stub de clases necesarias para poder compilar nuestro proyecto. En ella se incluye esta API para el manejo del Timeline, así como algunas otras clases de ayuda y controles para manejar y crear interfaces apropiadas para el dispositivo. Ya exploraremos estas clases con más detenimiento en próximos artículos.</p>

<p>[sh_margin margin=”20”]</p>

<h3 id="continuará">Continuará…</h3>

<p>En el próximo artículo crearemos nuestra primera aplicación para Google Glass. Exploraremos los pequeños ajustes que debemos hacer en un proyecto Android por defecto para hacerlo compatible y cómo incorporar el GDK.</p>
 <a class="read-more" href="/blog/2014/03/primeros-pasos-con-google-glass/">&raquo;</a>
        </section>
        <footer class="post-meta">
            <img class="author-thumb" src="/assets/images/avatar.jpg" alt="Author image" nopin="nopin" />
            <!-- author -->
            <a href='/author/raycoarana'>Rayco Araña</a>
            <!-- [[tags prefix=" on "]] -->
             
                on 
                
                    
                       <a href='/tag/android'>Android</a>,
                       
                
                    
                       <a href='/tag/gdk'>Gdk</a>,
                       
                
                    
                       <a href='/tag/glassware'>Glassware</a>,
                       
                
                    
                       <a href='/tag/google glass'>Google glass</a>,
                       
                
                    
                       <a href='/tag/timeline'>Timeline</a>
                       
                
            
            <time class="post-date" datetime="2014-03-02">02 Mar 2014</time>
        </footer>
    </article>
    
    <article class="post">
        <header class="post-header">
            <h2 class="post-title"><a href="/blog/2014/03/antipatrones-de-navegacion-en-android/">10 antipatrones de navegación en Android</a></h2>
        </header>
        <section class="post-excerpt">
            <p>Los chicos de Android Design in Action han publicado un video en YouTube donde nos describen algunos antipatrones de navegación que se han encontrado en algunas apps de las que analizan regularmente. Es un video muy interesante y casi obligatorio ver para no caer en malos patrones a la hora de crear aplicaciones. Si bien ver el video está bien, os lo resumo de forma rápida por si no tenéis 26 min libres para verlo.
<!-- more -->
[sh_margin margin=20]</p>

<h3 id="1navegación-en-el-menú-flotante-del-actionbar">1.Navegación en el menú flotante del ActionBar</h3>

<p>[caption id=”attachment_118” align=”aligncenter” width=”854”]<img src="http://raycoarana.com/wp-content/uploads/2014/02/NavigationInOverflow.png" alt="Navegación en el menú flotante del ActionBar" /> Navegación en el menú flotante del ActionBar[/caption]</p>

<p>El primer antipatrón es el que utiliza el panel flotante del ActionBar como elemento de navegación por la aplicación. Esto es un mal patrón ya que el ActionBar, como su propio nombre indica, es una <strong>barra de acciones</strong> y ahí han de residir los elementos con los que el usuario pueda realizar acciones sobre el contenido que se muestra. Peor aún es que las acciones que no se muestran y se dejan en el menú flotante, se consideran acciones secundarias, que el usuario utiliza con poca frecuencia, por lo que si seguimos este antipatrón, estamos dejando el elemento más importante de nuestra aplicación (la navegación por ella) relegada al lugar donde el usuario menos se lo espera.</p>

<p>Como elementos de navegación debemos usar otros patrones, bien explicados en la <a href="http://developer.android.com/design">web oficial de android</a> y utilizar el Navigation Drawer o pestañas.</p>

<p>[sh_margin margin=20]</p>

<h3 id="2mala-utilización-de-los-elementos-de-navegación">2.Mala utilización de los elementos de navegación</h3>

<p>[caption id=”attachment_123” align=”aligncenter” width=”854”]<img src="http://raycoarana.com/wp-content/uploads/2014/02/WrongNavHierarchy.png" alt="Mala utilización de los elementos de navegación" /> Mala utilización de los elementos de navegación[/caption]</p>

<p>El segundo antipatrón del que nos hablan es la mala organización de los elementos de navegación. Destacando los tres elementos de navegación básicos en una aplicación, el Navigation Drawer, un Spinner en el ActionBar y el uso de pestañas. El orden en el que estos elementos deben marcar la jerarquía de la información también nos viene definido de forma clara.</p>

<p>El principal elemento de navegación de nuestra aplicación debe ser el Navigation Drawer, en segundo lugar el Spinner del ActionBar y en tercer lugar las pestañas. Esto queda natural, ya que la forma en que miramos una pantalla siempre es de izquierda a derecha y de arriba a abajo. Siguiendo este camino, lo primero que nos encontraremos será el icono que nos indica que existe un Navigation Drawer. Si el usuario lo despliega, el ActionBar cambia (o debería!) y deja de mostrar las acciones o título del contenido actual para mostrar el título de nuestra aplicación y acciones globales a esta. En segundo lugar veremos el Spinner del ActionBar y por último veremos las pestañas como elemento más anidado.</p>

<p>[sh_margin margin=20]</p>

<h3 id="3pestañas-sin-swipe">3.Pestañas sin Swipe</h3>

<p>[caption id=”attachment_128” align=”aligncenter” width=”856”]<img src="http://raycoarana.com/wp-content/uploads/2014/02/TabsThatDontSwipe.png" alt="Pestañas sin Swipe" /> Pestañas sin Swipe[/caption]</p>

<p>Un clásico que a buen seguro os habréis encontrado alguna vez, ya sea como usuario o como desarrollador es la inclusión de contenido con scroll horizontal dentro de una pestaña, que por norma debe permitir el gesto de Swipe para cambiar entre ellas. Al incluir contenido con scroll horizontal, lo que provocamos es que entre en conflicto un gesto con otro, haciendo que a veces se detecte como Swipe y cambie de pestaña o a veces se detecte como scroll horizontal, haciéndole la vida imposible al usuario de nuestra app. Un ejemplo claro de esto nos puede ocurrir si añadimos un mapa como contenido de una pestaña, si queríamos fastidiar al usuario, ¡sin duda lo hemos conseguido!</p>

<p>Debemos evitar siempre tener contenido con scroll horizontal dentro de las pestañas y permitir siempre hacer el gesto de Swipe entre ellas (utiliza el ViewPager para ello). Y aunque lo encuentres en StackOverflow, NUNCA, NUNCA, NUNCA se te ocurra deshabilitar el Swipe como solución a este problema. Busca otra forma de organizar la navegación de tu app.</p>

<p>[sh_margin margin=20]</p>

<h3 id="4pestañas-con-jerarquía">4.Pestañas con jerarquía</h3>

<p>[caption id=”attachment_134” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/DeepOrPersistentTabs.png" alt="Pestañas con jerarquía" /> Pestañas con jerarquía[/caption]</p>

<p>Este es sin duda otro clásico que azota a nosotros pobres usuarios de Android a manos de desarrolladores venidos del mundo iOS. En Android las pestañas no deben ser elementos persistentes en la interfaz y no se deben tener jerarquía dentro de ellas. Cuando el usuario pulsa sobre algún elemento de la interfaz dentro de la pestaña, se debe hacer una navegación a una pantalla completamente nueva. Esto también es lo más sencillo de implementar, ya que no tendremos que guardar estados en las pestañas para almacenar esa navegación cuando el usuario cambia de contenido haciendo Swipe. Y también responde a una forma predecible de utilización, ya que no cabe a interpretación preguntas como:</p>

<ul>
  <li>
    <p>¿Qué pasa al darle atrás?</p>
  </li>
  <li>
    <p>¿Y al cambiar de pestaña, se mantiene la anterior o se vuelve a la inicial?</p>
  </li>
  <li>
    <p>¿Sabe el usuario que ha hecho una navegación dentro de una pestaña y debe darle atrás para volver?, porque si le da atrás en otra pestaña que esté en la principal se saldrá de la actividad, ¿o no?</p>
  </li>
</ul>

<p>Estos son los problemas que causamos al caer en este antipatrón, muchas dudas y posibles interpretaciones acerca de como debería funcionar la interfaz, creando confusión en el usuario.</p>

<p>[sh_margin margin=20]</p>

<h3 id="5cambio-de-pestaña-con-el-botón-atrás">5.Cambio de pestaña con el botón atrás</h3>

<p>[caption id=”attachment_135” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/BackTraversesTabs.png" alt="Cambio de pestaña con el botón atrás" /> Cambio de pestaña con el botón atrás[/caption]</p>

<p>Continuando con el mal uso de las pestañas, otro mal uso de ellas es guardar el cambio entre ellas e incluirlas en el historial del botón atrás. Las pestañas en Android son elementos superficiales de la interfaz, el cambio entre ellas no supone ningún cambio en el estado de la aplicación. Al poder cambiar entre ellas con un simple Swipe, el número de cambios que el usuario puede hacer entre ellas es muy numeroso y vamos a obligarle a pasar por cada una de ellas tantas veces como cambios haya realizado.</p>

<p>[sh_margin margin=20]</p>

<h3 id="6cambio-en-el-menú-de-navegación-con-el-botón-atrás">6.Cambio en el menú de navegación con el botón atrás</h3>

<p>[caption id=”attachment_153” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/BackTraversesDrawer1.png" alt="Cambio en el menú de navegación con el botón atrás" /> Cambio en el menú de navegación con el botón atrás[/caption]</p>

<p>Similar al anterior, se puede pretender guardar la navegación que el usuario realiza desde el menú de navegación, pero esto es un error. Cada vez que el usuario hace una navegación desde el NavigationDrawer, se debe limpiar el historial de navegación, ya que estamos haciendo un cambio de contexto en la aplicación, nos vamos a otra sección. Este cambio implica que el usuario va a realizar otra cosa diferente con la aplicación y no espera volver a la anterior.</p>

<p>La única excepción a esta regla es si queremos evitar que el usuario cierre la aplicación por accidente. Podemos mantener la actividad inicial de nuestra aplicación como raíz de la navegación y que cuando el usuario pulse atrás, este vuelva a la pantalla principal.</p>

<p>[sh_margin margin=20]</p>

<h3 id="7navegación-dentro-de-menú-de-navegación">7.Navegación dentro de menú de navegación</h3>

<p>[caption id=”attachment_137” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/DeepNavigationDrawers.png" alt="Navegación dentro de menú de navegación" /> Navegación dentro de menú de navegación[/caption]</p>

<p>Rizando el rizo, si tu aplicación es muy compleja podrías llegar a tener subsecciones. Existen diferentes formas de hacer llegar al usuario a estas subsecciones y una de ellas es incluirlas en el menú de navegación. El problema es incluir navegación dentro del menú de navegación, una vez más agregamos cierto grado de entropía a la interfaz, ya que caben diferentes estados y posibilidades al interactuar con ella. Si se cierra y se vuelve a abrir el menú de navegación, ¿se mantiene en la subsección? ¿vuelve al principal?</p>

<p>Lo recomendado en este caso es hacer uso de un <em>Accordion</em> que permitan colapsar las subsecciones, siempre que sea esta la forma de navegación que quieras, existen alternativas que dependen de la semántica de tu app.</p>

<p>[sh_margin margin=20]</p>

<h3 id="8elementos-del-menú-de-navegación-que-no-son-raíz">8.Elementos del menú de navegación que no son raíz</h3>

<p>[caption id=”attachment_139” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/BadDrawerTransitions.png" alt="Elementos del menú de navegación que no son raíz" /> Elementos del menú de navegación que no son raíz[/caption]</p>

<p>Como comentamos anteriormente, los elementos del menú de navegación son siempre raíces y por tanto todos deben mostrar el botón para desplegar el menú de navegación y nunca el botón Arriba. De la misma forma, se debe evitar el que se muestre la animación por defecto de nueva actividad y mostrar directamente el contenido. Así enfatizamos el hecho de que esa navegación no tiene historial, no estamos poniendo una nueva pantalla encima, sino que estamos cambiando una por otra.</p>

<p>[sh_margin margin=20]</p>

<h3 id="9no-mostrar-el-botón-arriba">9.No mostrar el botón Arriba</h3>

<p>[caption id=”attachment_140” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/NeverShowingUpCaret.png" alt="No mostrar el botón Arriba" /> No mostrar el botón Arriba[/caption]</p>

<p>Este caso es justo el opuesto al anterior, si como anteriormente hemos comentado toda pantalla que se muestre desde el menú de navegación debe mostrar el botón para desplegar este, toda pantalla a la que no se llegue desde el menú de navegación no debe mostrar el botón para mostrarlo. En este caso siempre debe mostrar el botón de arriba. Dejando la opción a abrir el menú de navegación con el gesto de Swipe desde el borde para aquellos usuarios que lo descubran.</p>

<p>[sh_margin margin=20]</p>

<h3 id="10menú-de-navegación-en-la-derecha">10.Menú de navegación en la derecha</h3>

<p>[caption id=”attachment_141” align=”aligncenter” width=”855”]<img src="http://raycoarana.com/wp-content/uploads/2014/03/RightSideNavigation.png" alt="Menú de navegación en la derecha" /> Menú de navegación en la derecha[/caption]</p>

<p>Y el último de los 10 antipatrones de navegación se trata de posicionar el menú de navegación (o la vista maestra de una relación maestro-detalle) en la parte derecha. Estas siempre deben estar en la izquierda, haciendo la navegación de izquierda a derecha. Con esto se enfatiza más en la jerarquía del contenido.</p>

<p>[sh_margin margin=20]</p>

<h3 id="solo-hay-10-antipatrones">¿Solo hay 10 antipatrones?</h3>

<p>Si bien muchos de estos antipatrones son conocidos por cualquiera que se haya empapado de las guías de diseño disponible en la página de desarrolladores de Android, algunos de los detalles comentados en este video son muy interesantes y ponen matices muy buenos a la hora de llevarlos a nuestras apps de forma correcta.</p>

<p>Aunque solo comentan 10, a buen seguro que por ahí habrá muchos más, en próximas entradas veremos algunos ejemplos de aplicaciones que hacen uso de estos malos patrones y cómo quedarían si se aplicasen bien, así como otros no comentados.</p>

<p>¿Conoces algún antipatrón más? ¿No estás de acuerdo con algo? ¡Deja tus comentarios!</p>
 <a class="read-more" href="/blog/2014/03/antipatrones-de-navegacion-en-android/">&raquo;</a>
        </section>
        <footer class="post-meta">
            <img class="author-thumb" src="/assets/images/avatar.jpg" alt="Author image" nopin="nopin" />
            <!-- author -->
            <a href='/author/raycoarana'>Rayco Araña</a>
            <!-- [[tags prefix=" on "]] -->
             
                on 
                
                    
                       <a href='/tag/android'>Android</a>,
                       
                
                    
                       <a href='/tag/diseño'>Diseño</a>,
                       
                
                    
                       <a href='/tag/patrones'>Patrones</a>,
                       
                
                    
                       <a href='/tag/smartphone'>Smartphone</a>,
                       
                
                    
                       <a href='/tag/UX'>Ux</a>
                       
                
            
            <time class="post-date" datetime="2014-03-02">02 Mar 2014</time>
        </footer>
    </article>
    

    <!-- Previous/next page links - displayed on every page -->
    
        <nav class="pagination" role="pagination">
    
        
            <a class="newer-posts" href="/tag/android/page2/" title="Previous Page">&laquo; Newer Posts</a>
      
    
    <span class="page-number"> Page 3 of 3 </span>
     
</nav>
    


</main>

        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">raycoarana</a> &copy; 2018</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-48361320-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
